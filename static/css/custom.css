:root {
  --card-glow-strength: 0.28;
  --card-glow-softness: 62%;
  --card-grid-size: 18px;
  --card-grid-dot-size: 0.9px;
  --card-grid-dot-color: rgba(var(--bs-body-color-rgb), 0.32);
}

.fx-card,
.booklet-card {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}

.card:not(.fx-card) {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}

.fx-card::before,
.booklet-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--bs-card-border-radius);
  pointer-events: none;
  opacity: 0;
  transition: opacity 240ms ease;
  z-index: 0;

  /* Subtle inner glow that follows the cursor via --glow-x/--glow-y */
  background: radial-gradient(
    220px circle at var(--glow-x, 50%) var(--glow-y, 40%),
    rgba(var(--bs-primary-rgb), var(--card-glow-strength)),
    transparent var(--card-glow-softness)
  );
}

.card:not(.fx-card)::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--bs-card-border-radius);
  pointer-events: none;
  opacity: 0;
  transition: opacity 220ms ease;
  z-index: 0;

  /* Dotted-grid engineering paper effect for default cards */
  background-image: radial-gradient(
    circle at center,
    var(--card-grid-dot-color) 0,
    var(--card-grid-dot-color) var(--card-grid-dot-size),
    transparent calc(var(--card-grid-dot-size) + 1px)
  );
  background-size: var(--card-grid-size) var(--card-grid-size);
  background-position: 0.5px 0.5px;
  background-repeat: repeat;
}

.card:not(.fx-card)::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--bs-card-border-radius);
  pointer-events: none;
  opacity: 0;
  transition: opacity 220ms ease;
  z-index: 0;
  box-shadow: inset 0 0 0 1px rgba(var(--bs-body-color-rgb), 0.08);
}

.card:not(.fx-card):hover::before,
.card:not(.fx-card):hover::after {
  opacity: 1;
}

.fx-card::after,
.booklet-card::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--bs-card-border-radius);
  pointer-events: none;
  opacity: 0;
  transition: opacity 240ms ease;
  z-index: 0;

  /* Soft edge highlight to make the glow feel "around the edges inside" */
  box-shadow:
    inset 0 0 0 1px rgba(var(--bs-primary-rgb), 0.35),
    inset 0 0 18px rgba(var(--bs-primary-rgb), 0.18);
}

.fx-card .fx-matrix,
.booklet-card .card-matrix {
  position: absolute;
  inset: 0;
  padding: var(--bs-card-spacer-y) var(--bs-card-spacer-x);
  pointer-events: none;
  user-select: none;
  z-index: 1;

  font-family: var(--bs-font-monospace);
  font-size: 0.72rem;
  line-height: 1.05;
  letter-spacing: 0.12em;
  opacity: 0;
  transition: opacity 240ms ease;

  color: rgba(var(--bs-body-color-rgb), 0.28);
  white-space: pre;
}

.fx-card .fx-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
  opacity: 0;
  transition: opacity 240ms ease;
}

.fx-card:hover .fx-canvas {
  opacity: 1;
}

/* Physics: no card glow; just the vector field canvas */
.fx-card[data-fx="vector-field"]::before,
.fx-card[data-fx="vector-field"]::after,
.fx-card[data-fx="vector-field"]:hover::before,
.fx-card[data-fx="vector-field"]:hover::after {
  opacity: 0;
  background: none;
  box-shadow: none;
}

.fx-card[data-fx="molecules"]::before,
.fx-card[data-fx="molecules"]::after,
.fx-card[data-fx="molecules"]:hover::before,
.fx-card[data-fx="molecules"]:hover::after {
  opacity: 0;
  background: none;
  box-shadow: none;
}

.fx-card:hover::before,
.fx-card:hover::after,
.fx-card:hover .fx-matrix,
.booklet-card:hover::before,
.booklet-card:hover::after,
.booklet-card:hover .card-matrix {
  opacity: 1;
}

.fx-card .card-body,
.fx-card .card-footer,
.booklet-card .card-body,
.booklet-card .card-footer {
  position: relative;
  z-index: 2;
}

.card:not(.fx-card) .card-body,
.card:not(.fx-card) .card-footer {
  position: relative;
  z-index: 1;
}
