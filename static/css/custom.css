:root {
  --card-glow-strength: 0.28;
  --card-glow-softness: 62%;
  --chemistry-primary-color: 138, 43, 226; /* Purple (BlueViolet) */
}

/* Purple accent color for Chemistry cards */
[data-subject="Chemistry"] {
  --bs-primary-rgb: var(--chemistry-primary-color);
}

.fx-card,
.booklet-card {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}

.fx-card::before,
.booklet-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--bs-card-border-radius);
  pointer-events: none;
  opacity: 0;
  transition: opacity 240ms ease;
  z-index: 0;

  /* Subtle inner glow that follows the cursor via --glow-x/--glow-y */
  background: radial-gradient(
    220px circle at var(--glow-x, 50%) var(--glow-y, 40%),
    rgba(var(--bs-primary-rgb), var(--card-glow-strength)),
    transparent var(--card-glow-softness)
  );
}

.fx-card::after,
.booklet-card::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--bs-card-border-radius);
  pointer-events: none;
  opacity: 0;
  transition: opacity 240ms ease;
  z-index: 0;

  /* Soft edge highlight to make the glow feel "around the edges inside" */
  box-shadow:
    inset 0 0 0 1px rgba(var(--bs-primary-rgb), 0.35),
    inset 0 0 18px rgba(var(--bs-primary-rgb), 0.18);
}

.fx-card .fx-matrix,
.booklet-card .card-matrix {
  position: absolute;
  inset: 0;
  padding: var(--bs-card-spacer-y) var(--bs-card-spacer-x);
  pointer-events: none;
  user-select: none;
  z-index: 1;

  font-family: var(--bs-font-monospace);
  font-size: 0.72rem;
  line-height: 1.05;
  letter-spacing: 0.12em;
  opacity: 0;
  transition: opacity 240ms ease;

  color: rgba(var(--bs-body-color-rgb), 0.28);
  white-space: pre;
}

.fx-card:hover::before,
.fx-card:hover::after,
.fx-card:hover .fx-matrix,
.booklet-card:hover::before,
.booklet-card:hover::after,
.booklet-card:hover .card-matrix {
  opacity: 1;
}

.fx-card .card-body,
.fx-card .card-footer,
.booklet-card .card-body,
.booklet-card .card-footer {
  position: relative;
  z-index: 2;
}

/* Bubble animation styles for Chemistry cards */
.bubble {
  position: absolute;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(var(--bs-primary-rgb), 0.5), rgba(var(--bs-primary-rgb), 0.2));
  border: 1px solid rgba(var(--bs-primary-rgb), 0.4);
  animation: rise linear infinite, sway ease-in-out infinite;
  pointer-events: none;
}

@keyframes rise {
  0% {
    bottom: -30px;
    opacity: 0;
  }
  5% {
    opacity: 0.7;
  }
  85% {
    opacity: 0.7;
  }
  100% {
    bottom: 110%;
    opacity: 0;
  }
}

@keyframes sway {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-20px);
  }
  75% {
    transform: translateX(20px);
  }
}
